{% extends 'crm/index.html' %}
{% block title %}Tasks{% endblock %}
{% load static %}
{% block content %}
<link rel="icon" href="{% static 'favicon.ico' %}">
<!-- ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ FullCalendar -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>

<!-- ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="{% static 'crm/js/task_list.js' %}"></script>
<link rel="stylesheet" href="{% static 'crm/task_list.css' %}">

<div class="calendar-container">
  <!-- ðŸ Mini Calendar + Form -->
  <aside id="mini-calendar">
    <!-- ðŸ“… Header -->
    <div class="calendar-header">
      <button id="prev-month">&lt;</button>
      <span id="current-month">March 2025</span>
      <button id="next-month">&gt;</button>
    </div>

    <!-- ðŸ—“ Weekdays -->
    <div class="weekdays">
      <div>S</div><div>M</div><div>T</div><div>W</div><div>T</div><div>F</div><div>S</div>
    </div>

    <!-- ðŸ”¢ Days -->
    <div class="days" id="calendar-days"></div>





    <!-- ðŸ“¦ Shipment Form -->
    <section id="shipment-form">
      <h3>ðŸ“¦ New Shipment</h3>
      <form id="add-shipment-form">
        <div class="form-row">
          <label>From:</label>
          <select id="supplier" name="supplier" required>
            <option value="" disabled selected>supplier</option>
            {% for supplier in suppliers %}
              <option value="{{ supplier.id }}">{{ supplier.name }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="form-row">
          <label>To:</label>
          <select id="buyer" name="buyer" required>
            <option value="" disabled selected>buyer</option>
            {% for buyer in buyers %}
              <option value="{{ buyer.id }}">{{ buyer.name }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="form-row">
          <label>Date:</label>
          <input type="date" id="shipment-date" required>
        </div>

        <div class="form-row">
          <label>Time:</label>
          <input type="time" id="shipment-time" required>
        </div>

        <div class="form-row">
          <label>Material:</label>
          <select id="shipment-grade" name="grade" required>
            <option value="" disabled selected>grade</option>
            {% for key, value in materials_list.items %}
              <option value="{{ key }}">{{ key }}</option>
            {% endfor %}
          </select>
        </div>

        <button type="submit" class="submit-btn">
          <span style="font-size: 18px;">âž•</span> Add Shipment
        </button>
      </form>
    </section>
  </aside>

  <!-- ðŸ—“ Full Calendar -->
  <div id="calendar"></div>
</div>




<!-- Ð‘Ð»Ð¾Ðº Ð´Ð»Ñ ÑÐ¿Ð¸ÑÐºÐ° Ð¾Ñ‚Ð³Ñ€ÑƒÐ·Ð¾Ðº, ÑÐ³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ð¾ Ð´Ð½ÑÐ¼ Ð½ÐµÐ´ÐµÐ»Ð¸ -->
<div id="shipment-list-container">
    <h3>Shipments by Day</h3>
    <div id="shipment-list">
        <!-- Ð¡ÑŽÐ´Ð° Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸ Ð±ÑƒÐ´ÑƒÑ‚ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑ‚ÑŒÑÑ Ð¾Ñ‚Ð³Ñ€ÑƒÐ·ÐºÐ¸, Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ðµ Ð¿Ð¾ Ð´Ð½ÑÐ¼ Ð½ÐµÐ´ÐµÐ»Ð¸ -->
    </div>
    <button id="generate-bol-btn" class="bol-button">Generate BOL</button>

</div>

<div id="bol-modal" class="modal">
    <div class="modal-content">
        <span class="close" id="close-bol-modal">&times;</span>
        <h2>Generate Bill of Lading</h2>
        <form id="bol-form">
            <label for="BOLSupplier">Ship To (Company):</label>
            <select id="bolSupplier" required>
                <option value="" disabled selected>Select a Supplier</option>
            </select>

            <label for="ship-to-address">Ship To (Address):</label>
            <input type="text" id="ship-to-address" readonly>

            <label for="bol-number">BOL Number:</label>
            <input type="text" id="bol-number" required>

            <label for="load-number">Load Number:</label>
            <input type="text" id="load-number" required>

            <label for="ship-date">Ship Date:</label>
            <input type="date" id="ship-date" required>

            <label for="due-date">Due Date:</label>
            <input type="date" id="due-date" required>

            <label for="carrier">Carrier:</label>
            <select id="carrier" required></select>

            <label for="po-number">PO Number:</label>
            <input type="text" id="po-number">

            <label>Freight Charge Terms:</label>
            <label><input type="radio" name="freight" value="Prepaid" required> Prepaid</label>
            <label><input type="radio" name="freight" value="Collect"> Collect</label>
            <label><input type="radio" name="freight" value="3rd Party"> 3rd Party</label>

            <button type="submit">Generate PDF</button>
        </form>
    </div>
</div>

{% endblock %}
