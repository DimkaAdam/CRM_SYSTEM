<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}CRM System{% endblock %}</title>

    {% load static %}
    <!-- Общие стили проекта -->
    <link rel="stylesheet" href="{% static 'crm/index.css' %}">
    <link rel="stylesheet" href="{% static 'crm/styles.css' %}">
    <link rel="stylesheet" href="{% static 'crm/deal_list.css' %}">
    <!-- Иконки для сайдбара -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">

    {% block extra_head %}{% endblock %}
</head>
<body>

    <!-- Форма выхода (скрытая), чтобы отправить POST по нажатию на Logout -->
    <form id="logoutForm" action="{% url 'logout' %}" method="post" style="display:none;">
      {% csrf_token %}
    </form>

    <!-- Левый сайдбар -->
    <nav class="sidebar">
      <!-- Логотип -->
      <div class="logo">
        <a href="{% url 'sales_analytics' %}">
          <img src="{% static 'crm/images/logo2.png' %}" alt="Logo" class="logo-img">
        </a>
      </div>

      <!-- Простое меню с иконками -->
      <div class="gooey-nav-container">
        <nav>
          <ul>
            <li>
              <a href="{% url 'contacts_list' %}">
                <i class="fa-solid fa-address-book"></i>
                <span>Contacts</span>
              </a>
            </li>
            <li>
              <a href="{% url 'deal_list' %}">
                <i class="fa-solid fa-handshake"></i>
                <span>Deals</span>
              </a>
            </li>
            <li>
              <a href="{% url 'task_list' %}">
                <i class="fa-solid fa-list-check"></i>
                <span>Tasks</span>
              </a>
            </li>
            <li>
              <a href="{% url 'kanban_board' %}">
                <i class="fa-solid fa-table-columns"></i>
                <span>Kanban Board</span>
              </a>
            </li>
            <li>
              <a href="{% url 'report_list' %}">
                <i class="fa-solid fa-file-invoice-dollar"></i>
                <span>Reports</span>
              </a>
            </li>
            <li>
              <a href="{% url 'sales_analytics' %}">
                <i class="fa-solid fa-chart-line"></i>
                <span>Dashboard</span>
              </a>
            </li>
            <li>
              <a href="{% url 'ai_dashboard' %}">
                <i class="fa-solid fa-brain"></i>
                <span>AI Dashboard</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>

      <!-- Кнопка выхода -->
      <div
        aria-label="User Logout Button"
        tabindex="0"
        role="button"
        class="user-profile"
        onclick="document.getElementById('logoutForm').submit();"
      >
        <div class="user-profile-inner">
          <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <g data-name="Layer 2" id="Layer_2">
              <path
                d="m15.626 11.769a6 6 0 1 0 -7.252 0 9.008 9.008 0 0 0 -5.374 8.231 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 9.008 9.008 0 0 0 -5.374-8.231zm-7.626-4.769a4 4 0 1 1 4 4 4 4 0 0 1 -4-4zm10 14h-12a1 1 0 0 1 -1-1 7 7 0 0 1 14 0 1 1 0 0 1 -1 1z"
              ></path>
            </g>
          </svg>
          <p>Log out</p>
        </div>
      </div>
    </nav>


    <!-- Верхняя панель -->
    <header class="top-bar">
      <div class="top-bar-left">
        <h1 class="top-bar-title">
          {% block page_title %}Contacts{% endblock %}
        </h1>
      </div>

      <div class="top-bar-right">
        <button class="top-bar-icon-btn" type="button" aria-label="Notifications">
          <i class="fa-solid fa-bell"></i>
        </button>

        <div class="top-bar-profile">
          <span class="top-bar-avatar">DA</span>
          <span class="top-bar-name">Dmitrii</span>
        </div>
      </div>
    </header>

    <!-- Основной контент справа от сайдбара -->
    <div class="content">
        {% block content %}{% endblock %}
    </div>

</body>
</html>
